<!-- <div class="p-6 bg-white rounded-lg shadow-md">
  @if (!selectedCourse) {
    <div>
      <h2 class="text-xl font-bold mb-4">Assignments</h2>
      @if (courses.length > 0) {
        <div>
          <ul class="course-list">
            @for (course of courses; track course) {
              <li class="course-item mb-2 p-4 bg-gray-100 rounded-md shadow-sm cursor-pointer" (click)="selectCourse(course)">
                <h3 class="text-lg font-semibold">{{ course.course }}</h3>
                <p class="text-sm text-gray-600">{{ course.subject }}</p>
              </li>
            }
          </ul>
        </div>
      }
    </div>
  }

  @if (selectedCourse) {
    <div>
      <button (click)="deselectCourse()" class="bg-blue-500 text-white px-4 py-2 rounded-md mb-4">Back to Assignemnts</button>
      <h2 class="text-xl font-bold mb-4">{{ selectedCourse.course }} Tasks</h2>
      @if (userRole === 'instructor') {
        <div class="instructor-view">
          <div class="mb-4">
            <input
              type="text"
              placeholder="Add a new task"
              class="p-2 border border-gray-300 rounded-md w-full"
              #taskInput
              />
              <button
                class="mt-2 bg-blue-500 text-white px-4 py-2 rounded-md w-full"
                (click)="addTask(taskInput.value); taskInput.value=''"
                >
                Add Task
              </button>
            </div>
            <ul class="task-list">
              @for (task of tasks; track task) {
                <li class="task-item mb-2 p-4 bg-gray-100 rounded-md shadow-sm">
                  <div class="flex items-center justify-between">
                    <div>
                      <h3 class="text-lg font-semibold">{{ task.name }}</h3>
                      <p class="text-sm text-gray-600">{{ task.dueDate | date: 'shortDate' }}</p>
                    </div>
                    <button class="text-red-500" (click)="removeTask(task)">Remove</button>
                  </div>
                </li>
              }
            </ul>
          </div>
        }
        @if (userRole === 'student') {
          <div class="student-view">
            <ul class="task-list">
              @for (task of tasks; track task) {
                <li class="task-item mb-2 p-4 bg-gray-100 rounded-md shadow-sm">
                  <div class="flex items-center justify-between">
                    <div>
                      <h3 class="text-lg font-semibold">{{ task.name }}</h3>
                      <p class="text-sm text-gray-600">Due: {{ task.dueDate | date: 'shortDate' }}</p>
                    </div>
                  </div>
                </li>
              }
            </ul>
          </div>
        }
      </div>
    }
  </div> -->



  <!-- src/app/tasks/tasks.component.html -->
  <ng-container *ngIf="!selectedTask">
    <div class="grid grid-cols-2 gap-4 w-full h-56 p-4">
      <div
        class="relative text-white rounded-lg p-4 flex justify-between items-start overflow-hidden"
        style="
          background-image: url('assets/img/classroom/onlineTaskBG.svg');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        "
      >
        <div class="absolute inset-0 bg-[#0C1228] opacity-50"></div>
        <div class="relative z-10 flex-grow">
          <h2 class="text-3xl font-bold text-white">My Online Task</h2>
          <p class="text-md">View task that you have this week</p>
        </div>
        <div class="relative z-10 flex flex-col items-end">
          <div class="text-4xl font-bold flex items-center">
            <span class="text-yellow-300 mr-1">{{ taskSummary.completed }}</span>
            <span class="text-2xl text-gray-300">/{{ taskSummary.total }}</span>
          </div>
          <span class="text-sm text-gray-300 mt-1">Completed</span>
        </div>
      </div>

      <div
        class="relative text-white rounded-lg p-4 flex justify-between items-start overflow-hidden"
        style="
          background-image: url('assets/img/classroom/testFileBG.svg');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        "
      >
        <div class="absolute inset-0 bg-[#0C1228] opacity-50"></div>
        <div class="relative z-10 flex-grow">
          <h2 class="text-3xl font-bold text-white">My Test Results</h2>
          <p class="text-md">View your performance this sem</p>
        </div>
        <div class="relative z-10 flex flex-col items-end">
          <div class="text-4xl font-bold text-yellow-300">
            {{ testResults.completed }}
          </div>
          <span class="text-sm text-gray-300 mt-1">Quiz Completed</span>
        </div>
      </div>
    </div>

    <h2 class="text-2xl font-bold mb-4 px-4">My Tasks</h2>
    
    <div class="p-6 bg-white w-4/5 mx-auto rounded-lg shadow-md border-t-4 border-green-600">
        <select (change)="setFilterCourse($event)" id="countries" class="bg-gray-50 mb-4 border max-w-sm overflow-hidden  border-gray-300 text-gray-900 text-sm rounded-lg focus:!ring-blue-500 focus:!border-blue-500 block w-full p-2.5 ">
          <option value="all" selected>All Classes</option>
          <option *ngFor="let course of courses" value="{{course.course}}">{{course.course}}</option>
        </select>


        <ng-container *ngFor="let collapsable of getCollapsables()">
          <div class="{{collapsables[collapsable]? 'mb-4' : ''}}">
            <div class ='flex my-2 px-4 py-2 hover:bg-gray-100 rounded-lg cursor-pointer'
              (click)="toggleCollapsable(collapsable)"
            >
              <h2 class="flex-1 text-lg"> {{collapsable}}</h2>
              <h2 class="text-base">{{collapsableItems[collapsable].length}}</h2>
              <i class="mx-4 px-1 fa-solid fa-chevron-down text-base hover:bg-slate-200 rounded-full"
              (click)="toggleCollapsable(collapsable)"
              ></i>
            </div>
            <div *ngIf="courses.length > 0" class="transition-all px-8 overflow-hidden {{collapsables[collapsable] ? '': 'h-0'}}">
              <ul *ngIf="collapsableItems[collapsable].length > 0; else noItem">
                  <ng-container  *ngFor="let task of collapsableItems[collapsable]">
                    <li
                      class="{{collapsables[collapsable]? 'translate-y-0' : '-translate-y-4'}} course-item mb-2 p-4 bg-gray-100 hover:bg-green-600 hover:scale-105 [&>p]:hover:text-gray-300 [&>h3]:hover:text-white rounded-md shadow-sm cursor-pointer transition-all"
                      (click)="selectTask(task)"
                    >
                      <h3 class="text-base font-semibold"><i class="fa-regular fa-file-lines px-2"></i> {{ task.name }}</h3>
                      <p class="px-[1.8rem] text-sm text-gray-600">{{ task.course }}</p>
                      <p class="px-[1.8rem] text-sm text-gray-600">Posted {{ formatDate(task.dueDate) }}</p>
                    </li>
                  </ng-container>
              </ul>
              <ng-template #noItem>
                <div>
                  No tasks were listed
                </div>
              </ng-template>
            </div>
          </div>


        </ng-container>

       



    </div>
  </ng-container>


<ng-container *ngIf="selectedTask">
    <div >
      <button (click)="deselectTask()" class="bg-green-700 hover:bg-green-600 text-white px-4 py-2 rounded-md mb-4">
        Back to Assignments
      </button>
      

      <div class="p-6 bg-white rounded-lg shadow-md border-t-4 pb-8 border-green-600">
        <div class="text-gray-600">
          Assignments  >  {{selectedTask.course}}  >  {{selectedTask.name}}
        </div>
        <div class="flex mt-4">
          <div class="rounded-full flex items-center justify-center w-16 h-16 bg-black">
            <i class="fa-regular fa-file-lines text-white text-2xl"></i>
          </div>
          <div class="flex-1 flex flex-col ml-4 mr-4">
            <div class="pb-4">
              <div class="text-3xl font-bold">{{selectedTask.name}}</div>
              <div class="text-lg text-gray-600">{{selectedTask.instructor}} • {{formatDate(selectedTask.dueDate)}}</div>
            </div>
            <div class="flex-1 flex flex-col border-solid border-green-700 border-y-[1px] rounded">
              <div class="flex-1 py-4">
                Good day, dear Students, 
      
                Here is the final requirement for the subject Fundamentals of Programming. Please check the uploaded file and follow the instructions accordingly.
      
                Thank you for your cooperation and participation in the course. Good luck and God bless you all!
                See you around
              </div>
        
              <div class="w-72 h-16 mt-2 hover:bg-gray-100 mb-5 border-solid border-black border-[1px]  rounded cursor-pointer"></div>
            </div>
          
            <!-- Comment Section-->
            <div class="mt-5 p-3 border-solid border-black shadow-md border-2 rounded-lg w-full ">
              <!-- Input -->
              <div class ='flex items-center'>
                <div class="rounded-full w-12 h-12 bg-blue-200"></div>
                <input type="text" class="h-10 flex-1 border-solid border-b-2 focus-within:border-green-600 ml-4" placeholder="Add comment...">
              </div>
              <!-- Comments -->
              <div class="pl-6 pr-4 mt-3">
                  <ul>
                    <li class="w-full p-3 bg-gray-100 rounded">
                      <!-- Name -->
                      <div class="text-sm font-semibold">
                        <span>
                          Anton Caesar Cabais
                        </span> • <span class="font-normal text-gray-600"> 
                          10:00 AM
                        </span>
                      </div>
                      <!-- Comment -->
                      <div >
                        Wow this is cool.
                      </div>
                    </li>
                  </ul>
              </div>  
            </div>
          </div>
          <!-- Work -->
          <div class="m-3 border-black border-solid border-2 shadow-md h-96 w-96 rounded-lg p-4 flex flex-col">
            <div class="text-2xl font-semibold"> Your Work</div>
            <!-- Content -->
            <div class="flex-1 flex-col flex overflow-y-scroll p-3">
              <!-- Files -->
              <div class="w-full border-solid border-[1px] border-gray-600 hover:bg-gray-100 h-12 rounded cursor-pointer"></div>
            </div>
            <div class="my-2 py-2 flex justify-center items-center rounded bg-blue-600 text-white cursor-pointer hover:bg-blue-500  select-none">
              Add Submission
            </div>
            <div class="py-2 flex justify-center items-center rounded bg-green-700 text-white cursor-pointer hover:bg-green-600  select-none">
              Submit
            </div>
          </div>
        </div>


    
      </div>

    </div>
  </ng-container>
