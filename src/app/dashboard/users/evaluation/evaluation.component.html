<div class="container mx-auto p-4">
    <h2 class="text-3xl font-bold mb-6">Evaluation for {{ selectedCourse?.course }}</h2>
  
    <!-- Course Selector -->
    <div class="mb-6">
      <label for="courseSelect" class="block text-lg font-medium text-gray-700">Select Course:</label>
      <select id="courseSelect" [(ngModel)]="selectedCourse" (ngModelChange)="selectCourse($event)"
        class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
        <option *ngFor="let course of courses" [ngValue]="course">{{ course.course }}</option>
      </select>
    </div>
  
    <ng-container *ngIf="selectedCourse">
      <!-- Student View -->
      <ng-container *ngIf="hasRole('student')">
        <div class="student-evaluation">
          <h3 class="text-xl font-semibold mb-4">Your Progress</h3>
          
          <div *ngFor="let module of selectedCourse.modules" class="mb-6">
            <h4 class="text-lg font-semibold">{{ module.title }}</h4>
            <p>{{ module.description }}</p>
            
            <div *ngIf="module.materials.length" class="mt-4">
              <h5 class="font-medium">Materials:</h5>
              <ul>
                <li *ngFor="let material of module.materials">
                  <a [href]="material.link" target="_blank" class="text-green-600 hover:underline">{{ material.title }}</a>
                </li>
              </ul>
            </div>
  
            <div *ngIf="module.assignments.length" class="mt-4">
              <h5 class="font-medium">Assignments:</h5>
              <ul>
                <li *ngFor="let assignment of module.assignments">
                  {{ assignment.name }} - Due: {{ assignment.dueDate | date:'mediumDate' }}
                </li>
              </ul>
            </div>
  
            <div *ngIf="module.exams.length" class="mt-4">
              <h5 class="font-medium">Exams:</h5>
              <ul>
                <li *ngFor="let exam of module.exams">
                  {{ exam.name }} - Due: {{ exam.dueDate | date:'mediumDate' }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </ng-container>
  
      <!-- Instructor or Department Admin View -->
      <ng-container *ngIf="hasAnyRole(['instructor', 'department_admin'])">
        <div class="instructor-evaluation">
          <h3 class="text-xl font-semibold mb-4">Manage Evaluations</h3>
          
          <div *ngFor="let module of selectedCourse.modules" class="mb-6">
            <h4 class="text-lg font-semibold">{{ module.title }}</h4>
            <p>{{ module.description }}</p>
  
            <!-- Instructor can add or grade assignments -->
            <div class="flex flex-col space-y-4 mt-4">
              <button class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition">
                Add Assignment
              </button>
              <button class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
                Grade Submissions
              </button>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>
  